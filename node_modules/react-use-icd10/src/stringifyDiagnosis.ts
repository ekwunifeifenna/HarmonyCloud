import { ICD10Object } from './types'

const stringifyDiagnosis = (diagnosis: ICD10Object[] = []): string => {
  if (!diagnosis.length) return ''
  const stringifier = (icd10: ICD10Object, i: number) => {
    // filters out "undefined"s
    if (!icd10) return ''
    const { code = '', description = '' } = icd10
    const isLast = i === diagnosis.length - 1
    const colon = code ? ':' : ''
    const comma = isLast ? '' : ','
    return `${code}${colon}${description}${comma}`
  }
  return diagnosis.map(stringifier).join(' ')
}

export default stringifyDiagnosis
